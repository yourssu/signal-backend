### 0. Register - Create new user and get tokens
POST {{host}}/api/auth/register

> {%
    client.global.set("accessToken", response.body.result.accessToken);
%}

###

### 1. Initiate KakaoPay payment
POST {{host}}/api/viewers/payment/kakaopay/initiate
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "quantity": 20,
  "price": 2
}


> {%
    client.global.set("orderId", response.body.result.orderId);
%}

###

@pgToken = e59dd8c4979f9eb6362d

### 2. Approve payment after user confirmation
# Note: pgToken is received from KakaoPay redirect after user approval
# This is a simulation - in real scenario, pgToken comes from KakaoPay callback
POST {{host}}/api/viewers/payment/kakaopay/approve
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "orderId": "{{orderId}}",
  "pgToken": "{{pgToken}}"
}

###

### 3. Check viewer's balance after payment
GET {{host}}/api/viewers/me
Authorization: Bearer {{accessToken}}
###
